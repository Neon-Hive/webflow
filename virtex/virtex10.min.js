gsap.registerPlugin(ScrollTrigger,CustomEase,ScrambleTextPlugin,Flip),pageFunctions.addFunction("globalEase",function(){CustomEase.create("sineInOut","0.445, 0.05, 0.55, 0.95"),CustomEase.create("cubincInOut","0.645, 0.045, 0.355, 1"),CustomEase.create("quartInOut","0.77, 0, 0.175, 1")}),pageFunctions.addFunction("pageTransition",function(){if("undefined"==typeof gsap||"undefined"==typeof ScrollTrigger||"undefined"==typeof SplitType)console.error("GSAP, ScrollTrigger, or SplitType not loaded");else{window.lenis&&window.lenisRunning&&window.lenis.stop();let e=document.querySelector(".nav_wrap"),g=(document.body.style.overflow="hidden",document.body.style.paddingRight="4px",e&&(e.style.paddingRight="4px"),document.querySelectorAll("[data-transition]")),a=document.querySelector(".transition_wrap"),n=lottie.loadAnimation({container:document.querySelector(".transition_lottie"),loop:!1,autoplay:!1,path:"https://cdn.prod.website-files.com/680f5fbcc4cb7ef827577478/689b84f3b0e97211b32855a6_Virtex%20Lottie%203.0.json"});var t=gsap.timeline({onComplete:()=>{gsap.set(a,{display:"none"})}});function y(){document.body.style.overflow="",document.body.style.paddingRight="",e&&(e.style.paddingRight=""),window.lenis&&!window.lenisRunning&&(window.lenis.start(),window.lenisRunning=!0)}t.set(a,{display:"flex",willChange:"clip-path",clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"}),t.to({},{delay:.2,duration:1.2,onUpdate:function(){var e=Math.min(this.progress(),.99);n.goToAndStop(Math.floor(n.totalFrames*e),!0)}}),t.to(a,{clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)",duration:1,ease:"quartInOut"},"-=0.6"),t.add(()=>{if(e=$("body").data("page"))switch(e){case"launch":(()=>{let e=document.querySelector("[data-transition=nav]"),t=document.querySelector(".header_height"),a=document.querySelector("[data-transition=driver]"),n=document.querySelector("[data-transition=clip]"),o=document.querySelector("[data-transition=bg]"),r=document.querySelector("[data-transition=block1]"),i=r?.querySelector("[data-transition=subtitle]"),l=r?.querySelector("[data-transition=heading]"),s=r?.querySelector("[data-transition=text]"),u=r?.querySelector("[data-transition=btn]"),c=document.querySelector("[data-transition=block2]"),d=c?.querySelectorAll("[data-transition=heading2]"),p=c?.querySelector("[data-transition=text2]");var m;t&&a&&o&&r?(0<(m=document.querySelectorAll("[data-header-split]")).length&&new SplitType(m,{types:"words, chars",tagName:"span"}),c&&gsap.set(c,{opacity:0}),n&&gsap.set(n,{scale:0,clipPath:"polygon(25% 0%, 100% 0%, 75% 100%, 0% 100%)"}),m=gsap.timeline({onComplete:function(){y();var e=gsap.timeline({scrollTrigger:{trigger:t,start:"top top",end:"bottom bottom",scrub:!0,markers:!1}});if(e.to(r,{opacity:0,filter:"blur(5px)",duration:.1},.1),e.to([o,a],{scale:1,opacity:0,duration:.3},.3),c){if(e.to(c,{opacity:1,duration:.05},.5),d&&0<d.length){let t=[];d.forEach(e=>{e=e.querySelectorAll(".word");0<e.length&&e.forEach(e=>t.push(e))}),0<t.length&&e.from(t,{opacity:0,filter:"blur(5px)",duration:.6,stagger:.1,ease:"power4.out"},.5)}p&&e.from(p,{opacity:0,duration:.2,ease:"power3.out"},.7)}n&&e.to(n,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",scale:1,duration:.4},.45)}}),gsap.set(g,{visibility:"visible"}),m.from(o,{opacity:0,scale:1.4,duration:4,ease:"sineInOut"}),m.from(a,{opacity:0,scale:1.2,duration:4,ease:"sineInOut"},"<1"),i&&e&&m.from([i,e],{opacity:0,duration:1.2,ease:"sineInOut"},"-=3"),l&&0<l.querySelectorAll(".word").length&&m.from(l.querySelectorAll(".word"),{opacity:0,filter:"blur(5px)",duration:1.2,stagger:.2,ease:"sineInOut"},"<0.1"),s&&u&&m.from([s,u],{opacity:0,filter:"blur(5px)",duration:1,stagger:.5,ease:"sineInOut"},"<0.3")):(console.error("One or more header elements not found"),y())})();break;case"error":(()=>{var e=document.querySelector("[data-transition=nav]"),t=document.querySelector('[data-transition="bg"]'),a=document.querySelector('[data-transition="visual"]'),n=document.querySelectorAll('[data-transition="fade"]'),o=gsap.timeline({onComplete:function(){y()}});gsap.set(g,{visibility:"visible"}),t&&o.from(t,{opacity:0,scale:1.4,duration:4,ease:"sineInOut"}),a&&o.from(a,{opacity:0,scale:1.2,duration:4,ease:"sineInOut"},"<1"),n&&0<n.length&&o.from(n,{opacity:0,filter:"blur(5px)",duration:1,stagger:{each:.1},ease:"sineInOut"},"<0.4"),e&&o.from(e,{opacity:0,duration:1.2,ease:"sineInOut"},"<")})();break;case"how":(()=>{var e=document.querySelector("[data-transition=nav]"),t=document.querySelector("[data-transition=bg]"),a=document.querySelector(".header2_component"),n=a?.querySelector("[data-transition=subtitle]"),o=a?.querySelector("[data-transition=heading]"),r=a?.querySelector("[data-transition=text]"),i=a?.querySelector("[data-transition=btn]");t&&a?(o&&new SplitType(o,{types:"words, chars",tagName:"span"}),gsap.set(g,{visibility:"visible"}),(a=gsap.timeline({onComplete:function(){y()}})).from(t,{opacity:0,scale:1.4,duration:4,ease:"sineInOut"}),n&&e&&a.from([n,e],{opacity:0,duration:1.2,ease:"sineInOut"},"-=3"),o&&0<o.querySelectorAll(".word").length&&a.from(o.querySelectorAll(".word"),{opacity:0,filter:"blur(5px)",duration:1.2,stagger:.2,ease:"sineInOut"},"<0.1"),r&&i&&a.from([r,i],{opacity:0,filter:"blur(5px)",duration:1,stagger:.5,ease:"sineInOut"},"<0.3")):(console.error("One or more header elements not found"),y())})();break;case"news":(()=>{var e=document.querySelector("[data-transition=nav]"),t=document.querySelectorAll('[data-transition="fade"]'),a=document.querySelectorAll('[data-transition="vertical-line"]'),n=document.querySelectorAll('[data-transition="horizontal-line"]'),o=document.querySelectorAll(".news_header_svg path"),r=gsap.timeline({onComplete:function(){y()}});gsap.set(g,{visibility:"visible"}),0<a.length&&r.from(a,{scaleY:0,transformOrigin:"top",duration:1.2,delay:.2,ease:"sineInOut"}),0<n.length&&r.from(n,{scaleX:0,transformOrigin:"left",duration:.6,ease:"sineInOut"},"-=0.2"),0<t.length&&r.from(t,{opacity:0,filter:"blur(5px)",duration:1,stagger:{each:.1},ease:"sineInOut"},"<0.3"),0<o.length&&r.from(o,{opacity:0,duration:1,ease:"sineInOut",stagger:{amount:.6,from:"random"}},"<0.2"),e&&r.from(e,{opacity:0,duration:1.2,ease:"sineInOut"},"<")})();break;case"home":(()=>{var e=document.querySelector("[data-transition=nav]"),t=document.querySelector("[data-transition=driver]"),a=document.querySelector("[data-transition=bg]"),n=document.querySelector(".header2_component"),o=n?.querySelector("[data-transition=subtitle]"),r=n?.querySelector("[data-transition=heading]"),i=n?.querySelector("[data-transition=text]"),l=n?.querySelector("[data-transition=btn]");t&&a&&n?(r&&new SplitType(r,{types:"words, chars",tagName:"span"}),n=gsap.timeline({onComplete:function(){y()}}),gsap.set(g,{visibility:"visible"}),n.from(a,{opacity:0,scale:1.4,duration:4,ease:"sineInOut"}),n.from(t,{opacity:0,scale:1.2,duration:4,ease:"sineInOut"},"<1"),o&&e&&n.from([o,e],{opacity:0,duration:1.2,ease:"sineInOut"},"-=3"),r&&0<r.querySelectorAll(".word").length&&n.from(r.querySelectorAll(".word"),{opacity:0,filter:"blur(5px)",duration:1.2,stagger:.2,ease:"sineInOut"},"<0.1"),i&&l&&n.from([i,l],{opacity:0,filter:"blur(5px)",duration:1,stagger:.5,ease:"sineInOut"},"<0.3")):(console.error("One or more header elements not found"),y())})()}else{var e=document.querySelector("[data-transition=nav]"),t=document.querySelector('[data-transition="visual"]'),a=document.querySelectorAll('[data-transition="fade"]'),n=document.querySelectorAll('[data-transition="horizontal-line"]'),o=gsap.timeline({onComplete:function(){y()}});gsap.set(g,{visibility:"visible"}),t&&(o.from(t,{scale:1.4,duration:2,ease:"sineInOut"}),o.from(t,{opacity:0,duration:.4,ease:"sineInOut"},"<")),a&&0<a.length&&o.from(a,{opacity:0,filter:"blur(5px)",duration:1,stagger:{each:.1},ease:"sineInOut"},"<0.4"),0<n.length&&o.from(n,{scaleX:0,transformOrigin:"left",duration:.6,ease:"sineInOut"},"-=0.2"),e&&o.from(e,{opacity:0,duration:1.2,ease:"sineInOut"},"<")}},"-=0.6"),$("a:not(.excluded-class)").on("click",function(e){let t=$(this).attr("href");$(this).prop("hostname")!==window.location.host||t.includes("#")||"_blank"===$(this).attr("target")||(e.preventDefault(),e=gsap.timeline(),n.goToAndStop(0,!0),e.set(a,{display:"flex",clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)"}).to(a,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",duration:.6,ease:"quartInOut"}),e.eventCallback("onComplete",()=>{window.location.href=t}))}),window.onpageshow=function(e){e.persisted&&window.location.reload()}}}),pageFunctions.addFunction("globalAnimation",function(){var e=document.querySelectorAll("[data-animation-gsap]");0<e.length&&e.forEach(function(e){var t=e.getAttribute("data-animation-gsap"),a=parseFloat(e.getAttribute("data-delay-gsap")||0),n=parseFloat(e.getAttribute("data-duration-gsap")||.8),o=gsap.timeline({paused:!0});switch(t){case"fade-in":o.from(e,{opacity:0,duration:n,delay:a,ease:"sineInOut"});break;case"fade-blur":o.from(e,{opacity:0,filter:"blur(5px)",duration:n,delay:a,ease:"sineInOut"});break;case"fade-in-up":o.from(e,{opacity:0,y:"1rem",duration:n,delay:a,ease:"sineInOut"});break;case"scale-in":o.from(e,{opacity:0,scale:.8,duration:n,delay:a,ease:"power1.out"});break;case"width":o.from(e,{width:"0%",duration:n,delay:a,ease:"cubincInOut"});break;case"stagger-children":var r=e.children;o.from(r,{opacity:0,filter:"blur(5px)",duration:n,stagger:.2,delay:a,ease:"sineInOut"});break;default:o.from(e,{opacity:0,duration:n,delay:a,ease:"sineInOut"})}ScrollTrigger.create({trigger:e,start:"top 95%",toggleActions:"play none none none",animation:o})}),document.querySelectorAll('[data-button-hover="text"]').forEach(e=>{let t=e.querySelector('[data-button-text="target"]'),a=t.textContent,n=(t.style.display="inline-block",t.style.minWidth=t.offsetWidth+"px",!1);e.addEventListener("mouseenter",()=>{n||(n=!0,gsap.to(t,{duration:1,scrambleText:{text:a,chars:"01",tweenLength:!1},onComplete:()=>{n=!1}}))}),e.addEventListener("mouseleave",()=>{n||(n=!0,gsap.to(t,{duration:.6,scrambleText:{text:a,speed:2,chars:"01",tweenLength:!1},onComplete:()=>{n=!1}}))})})}),pageFunctions.addFunction("globalRefreshTriggers",function(){let a=document.documentElement.clientWidth,n=document.documentElement.clientHeight;var e=((t,a)=>{let n;return function(...e){clearTimeout(n),n=setTimeout(()=>t.apply(this,e),a)}})(function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;e===a&&t===n||(ScrollTrigger.refresh(),a=e,n=t)},300);setInterval(e,300)}),pageFunctions.addFunction("themeChange",function(){document.querySelectorAll("[data-animate-theme-to]").forEach(function(e){let t=e.getAttribute("data-animate-theme-to");ScrollTrigger.create({trigger:e,start:"top 10%",end:"bottom 10%",onToggle:({isActive:e})=>{e&&gsap.to("body",{...colorThemes.getTheme(t),duration:.8,ease:"sineInOut"})}})})});