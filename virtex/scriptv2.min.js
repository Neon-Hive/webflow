gsap.registerPlugin(ScrollTrigger,CustomEase,ScrambleTextPlugin,Flip),pageFunctions.addFunction("globalEase",function(){CustomEase.create("sineInOut","0.445, 0.05, 0.55, 0.95"),CustomEase.create("cubincInOut","0.645, 0.045, 0.355, 1"),CustomEase.create("quartInOut","0.77, 0, 0.175, 1")}),pageFunctions.addFunction("pageTransition",function(){if("undefined"==typeof gsap||"undefined"==typeof ScrollTrigger||"undefined"==typeof SplitType)console.error("GSAP, ScrollTrigger, or SplitType not loaded");else{window.lenis&&window.lenisRunning&&window.lenis.stop();let e=document.querySelector(".nav_wrap"),g=(document.body.style.overflow="hidden",document.body.style.paddingRight="4px",e&&(e.style.paddingRight="4px"),document.querySelectorAll("[data-transition]")),n=document.querySelector(".transition_wrap"),a=lottie.loadAnimation({container:document.querySelector(".transition_lottie"),loop:!1,autoplay:!1,path:"https://cdn.prod.website-files.com/680f5fbcc4cb7ef827577478/6818bc7677c2d7bb33dcd3aa_57bd411151fb506e49da4ab4ed6a2916_Virtex%20Intro.json"});var t=gsap.timeline({onComplete:()=>{gsap.set(n,{display:"none"})}});function y(){document.body.style.overflow="",document.body.style.paddingRight="",e&&(e.style.paddingRight=""),window.lenis&&!window.lenisRunning&&(window.lenis.start(),window.lenisRunning=!0)}t.set(n,{display:"flex",willChange:"clip-path",clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"}),t.to({},{delay:.2,duration:3,onUpdate:function(){var e=Math.min(this.progress(),.5);a.goToAndStop(Math.floor(a.totalFrames*e),!0)}}),t.to(n,{clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)",duration:1,ease:"quartInOut"},"-=0.6"),t.add(()=>{if(e=$("body").data("page"))switch(e){case"launch":(()=>{let e=document.querySelector("[data-transition=nav]"),t=document.querySelector(".header_height"),n=document.querySelector("[data-transition=driver]"),a=document.querySelector("[data-transition=clip]"),o=document.querySelector("[data-transition=bg]"),i=document.querySelector("[data-transition=block1]"),r=i?.querySelector("[data-transition=subtitle]"),l=i?.querySelector("[data-transition=heading]"),s=i?.querySelector("[data-transition=text]"),c=i?.querySelector("[data-transition=btn]"),u=document.querySelector("[data-transition=block2]"),d=u?.querySelectorAll("[data-transition=heading2]"),p=u?.querySelector("[data-transition=text2]");var m;t&&n&&o&&i?(0<(m=document.querySelectorAll("[data-header-split]")).length&&new SplitType(m,{types:"words, chars",tagName:"span"}),u&&gsap.set(u,{opacity:0}),a&&gsap.set(a,{scale:0,clipPath:"polygon(25% 0%, 100% 0%, 75% 100%, 0% 100%)"}),m=gsap.timeline({onComplete:function(){y();var e=gsap.timeline({scrollTrigger:{trigger:t,start:"top top",end:"bottom bottom",scrub:!0,markers:!1}});if(e.to(i,{opacity:0,filter:"blur(5px)",duration:.1},.1),e.to([o,n],{scale:1,opacity:0,duration:.3},.3),u){if(e.to(u,{opacity:1,duration:.05},.5),d&&0<d.length){let t=[];d.forEach(e=>{e=e.querySelectorAll(".word");0<e.length&&e.forEach(e=>t.push(e))}),0<t.length&&e.from(t,{opacity:0,filter:"blur(5px)",duration:.6,stagger:.1,ease:"power4.out"},.5)}p&&e.from(p,{opacity:0,duration:.2,ease:"power3.out"},.7)}a&&e.to(a,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",scale:1,duration:.4},.45)}}),gsap.set(g,{visibility:"visible"}),m.from(o,{opacity:0,scale:1.4,duration:4,ease:"sineInOut"}),m.from(n,{opacity:0,scale:1.2,duration:4,ease:"sineInOut"},"<1"),r&&e&&m.from([r,e],{opacity:0,duration:1.2,ease:"sineInOut"},"-=3"),l&&0<l.querySelectorAll(".word").length&&m.from(l.querySelectorAll(".word"),{opacity:0,filter:"blur(5px)",duration:1.2,stagger:.2,ease:"sineInOut"},"<0.1"),s&&c&&m.from([s,c],{opacity:0,filter:"blur(5px)",duration:1,stagger:.5,ease:"sineInOut"},"<0.3")):(console.error("One or more header elements not found"),y())})();break;case"error":(()=>{var e=document.querySelector("[data-transition=nav]"),t=document.querySelector('[data-transition="bg"]'),n=document.querySelector('[data-transition="visual"]'),a=document.querySelectorAll('[data-transition="fade"]'),o=gsap.timeline({onComplete:function(){y()}});gsap.set(g,{visibility:"visible"}),t&&o.from(t,{opacity:0,scale:1.4,duration:4,ease:"sineInOut"}),n&&o.from(n,{opacity:0,scale:1.2,duration:4,ease:"sineInOut"},"<1"),a&&0<a.length&&o.from(a,{opacity:0,filter:"blur(5px)",duration:1,stagger:{each:.1},ease:"sineInOut"},"<0.4"),e&&o.from(e,{opacity:0,duration:1.2,ease:"sineInOut"},"<")})();break;case"how":(()=>{var e=document.querySelector("[data-transition=nav]"),t=document.querySelector("[data-transition=bg]"),n=document.querySelector(".header2_component"),a=n?.querySelector("[data-transition=subtitle]"),o=n?.querySelector("[data-transition=heading]"),i=n?.querySelector("[data-transition=text]"),r=n?.querySelector("[data-transition=btn]");t&&n?(o&&new SplitType(o,{types:"words, chars",tagName:"span"}),gsap.set(g,{visibility:"visible"}),(n=gsap.timeline({onComplete:function(){y()}})).from(t,{opacity:0,scale:1.4,duration:4,ease:"sineInOut"}),a&&e&&n.from([a,e],{opacity:0,duration:1.2,ease:"sineInOut"},"-=3"),o&&0<o.querySelectorAll(".word").length&&n.from(o.querySelectorAll(".word"),{opacity:0,filter:"blur(5px)",duration:1.2,stagger:.2,ease:"sineInOut"},"<0.1"),i&&r&&n.from([i,r],{opacity:0,filter:"blur(5px)",duration:1,stagger:.5,ease:"sineInOut"},"<0.3")):(console.error("One or more header elements not found"),y())})();break;case"news":(()=>{var e=document.querySelector("[data-transition=nav]"),t=document.querySelectorAll('[data-transition="fade"]'),n=document.querySelectorAll('[data-transition="vertical-line"]'),a=document.querySelectorAll('[data-transition="horizontal-line"]'),o=document.querySelectorAll(".news_header_svg path"),i=gsap.timeline({onComplete:function(){y()}});gsap.set(g,{visibility:"visible"}),0<n.length&&i.from(n,{scaleY:0,transformOrigin:"top",duration:1.2,delay:.2,ease:"sineInOut"}),0<a.length&&i.from(a,{scaleX:0,transformOrigin:"left",duration:.6,ease:"sineInOut"},"-=0.2"),0<t.length&&i.from(t,{opacity:0,filter:"blur(5px)",duration:1,stagger:{each:.1},ease:"sineInOut"},"<0.3"),0<o.length&&i.from(o,{opacity:0,duration:1,ease:"sineInOut",stagger:{amount:.6,from:"random"}},"<0.2"),e&&i.from(e,{opacity:0,duration:1.2,ease:"sineInOut"},"<")})();break;case"home":(()=>{var e=document.querySelector("[data-transition=nav]"),t=document.querySelector("[data-transition=driver]"),n=document.querySelector("[data-transition=bg]"),a=document.querySelector(".header2_component"),o=a?.querySelector("[data-transition=subtitle]"),i=a?.querySelector("[data-transition=heading]"),r=a?.querySelector("[data-transition=text]"),l=a?.querySelector("[data-transition=btn]");t&&n&&a?(i&&new SplitType(i,{types:"words, chars",tagName:"span"}),a=gsap.timeline({onComplete:function(){y()}}),gsap.set(g,{visibility:"visible"}),a.from(n,{opacity:0,scale:1.4,duration:4,ease:"sineInOut"}),a.from(t,{opacity:0,scale:1.2,duration:4,ease:"sineInOut"},"<1"),o&&e&&a.from([o,e],{opacity:0,duration:1.2,ease:"sineInOut"},"-=3"),i&&0<i.querySelectorAll(".word").length&&a.from(i.querySelectorAll(".word"),{opacity:0,filter:"blur(5px)",duration:1.2,stagger:.2,ease:"sineInOut"},"<0.1"),r&&l&&a.from([r,l],{opacity:0,filter:"blur(5px)",duration:1,stagger:.5,ease:"sineInOut"},"<0.3")):(console.error("One or more header elements not found"),y())})()}else{var e=document.querySelector("[data-transition=nav]"),t=document.querySelector('[data-transition="visual"]'),n=document.querySelectorAll('[data-transition="fade"]'),a=document.querySelectorAll('[data-transition="horizontal-line"]'),o=gsap.timeline({onComplete:function(){y()}});gsap.set(g,{visibility:"visible"}),t&&(o.from(t,{scale:1.4,duration:2,ease:"sineInOut"}),o.from(t,{opacity:0,duration:.4,ease:"sineInOut"},"<")),n&&0<n.length&&o.from(n,{opacity:0,filter:"blur(5px)",duration:1,stagger:{each:.1},ease:"sineInOut"},"<0.4"),0<a.length&&o.from(a,{scaleX:0,transformOrigin:"left",duration:.6,ease:"sineInOut"},"-=0.2"),e&&o.from(e,{opacity:0,duration:1.2,ease:"sineInOut"},"<")}},"-=0.6"),$("a:not(.excluded-class)").on("click",function(e){let t=$(this).attr("href");$(this).prop("hostname")!==window.location.host||t.includes("#")||"_blank"===$(this).attr("target")||(e.preventDefault(),e=gsap.timeline(),a.goToAndStop(0,!0),e.set(n,{display:"flex",clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)"}).to(n,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",duration:.6,ease:"quartInOut"}),e.eventCallback("onComplete",()=>{window.location.href=t}))}),window.onpageshow=function(e){e.persisted&&window.location.reload()}}}),pageFunctions.addFunction("globalLenis",function(){let n=new Lenis({direction:"vertical",gestureDirection:"vertical",smooth:!0,lerp:.05,wheelMultiplier:.9,mouseMultiplier:.9,smoothTouch:!1,touchMultiplier:1.5,infinite:!1}),e=(window.lenis=n,window.lenisRunning=!0,n.start.bind(n)),t=n.stop.bind(n);n.start=function(){window.lenisRunning=!0,e()},n.stop=function(){window.lenisRunning=!1,t()},requestAnimationFrame(function e(t){n.raf(t),requestAnimationFrame(e)}),document.querySelectorAll("[data-lenis-start=true]").forEach(e=>{e.addEventListener("click",()=>n.start())}),document.querySelectorAll("[data-lenis-stop=true]").forEach(e=>{e.addEventListener("click",()=>n.stop())}),document.querySelectorAll("[data-lenis-toggle]").forEach(e=>{e.addEventListener("click",function(){this.classList.toggle("stop-scroll"),this.classList.contains("stop-scroll")?n.stop():n.start()})})}),pageFunctions.addFunction("globalAnimation",function(){var e=document.querySelectorAll("[data-animation-gsap]");0<e.length&&e.forEach(function(e){var t=e.getAttribute("data-animation-gsap"),n=parseFloat(e.getAttribute("data-delay-gsap")||0),a=parseFloat(e.getAttribute("data-duration-gsap")||.8),o=gsap.timeline({paused:!0});switch(t){case"fade-in":o.from(e,{opacity:0,duration:a,delay:n,ease:"sineInOut"});break;case"fade-blur":o.from(e,{opacity:0,filter:"blur(5px)",duration:a,delay:n,ease:"sineInOut"});break;case"fade-in-up":o.from(e,{opacity:0,y:"1rem",duration:a,delay:n,ease:"sineInOut"});break;case"scale-in":o.from(e,{opacity:0,scale:.8,duration:a,delay:n,ease:"power1.out"});break;case"width":o.from(e,{width:"0%",duration:a,delay:n,ease:"cubincInOut"});break;case"stagger-children":var i=e.children;o.from(i,{opacity:0,filter:"blur(5px)",duration:a,stagger:.2,delay:n,ease:"sineInOut"});break;default:o.from(e,{opacity:0,duration:a,delay:n,ease:"sineInOut"})}ScrollTrigger.create({trigger:e,start:"top 95%",toggleActions:"play none none none",animation:o})}),document.querySelectorAll('[data-button-hover="text"]').forEach(e=>{let t=e.querySelector('[data-button-text="target"]'),n=t.textContent,a=(t.style.display="inline-block",t.style.minWidth=t.offsetWidth+"px",!1);e.addEventListener("mouseenter",()=>{a||(a=!0,gsap.to(t,{duration:1,scrambleText:{text:n,chars:"01",tweenLength:!1},onComplete:()=>{a=!1}}))}),e.addEventListener("mouseleave",()=>{a||(a=!0,gsap.to(t,{duration:.6,scrambleText:{text:n,speed:2,chars:"01",tweenLength:!1},onComplete:()=>{a=!1}}))})})}),pageFunctions.addFunction("globalRefreshTriggers",function(){let n=document.documentElement.clientWidth,a=document.documentElement.clientHeight;var e=((t,n)=>{let a;return function(...e){clearTimeout(a),a=setTimeout(()=>t.apply(this,e),n)}})(function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;e===n&&t===a||(ScrollTrigger.refresh(),n=e,a=t)},300);setInterval(e,300)}),pageFunctions.addFunction("themeChange",function(){document.querySelectorAll("[data-animate-theme-to]").forEach(function(e){let t=e.getAttribute("data-animate-theme-to");ScrollTrigger.create({trigger:e,start:"top center",end:"bottom center",onToggle:({isActive:e})=>{e&&gsap.to("body",{...colorThemes.getTheme(t),duration:.8,ease:"sineInOut"})}})})});