function decodeHtmlEntities(t){var e;return t?((e=document.createElement("textarea")).innerHTML=t,e.value):""}function toPlainLower(t){return String(t||"").trim().toLowerCase().replace(/[^a-z0-9&.\-_, |]+/g,"")}function getUrlSegment(t){return(location.pathname.split("/").filter(Boolean)[t-1]||"").split(".")[0]}function getUserECID(){if("undefined"!=typeof Visitor&&Visitor.getInstance)return Visitor.getInstance("cedarssinai")?.getMarketingCloudVisitorID?.()}function getUserECIDAsync(n=5e3,r=100){return new Promise(e=>{let o=Date.now(),a=()=>{var t=getUserECID();t?e(t):(t=Date.now()-o,n<=t?e(void 0):setTimeout(a,r))};a()})}function getBlogTags(){return Array.from(document.querySelectorAll("[data-adobe-tags-list] [data-component-title]")).map(t=>toPlainLower(t.getAttribute("data-component-title"))).filter(Boolean).join("|")}function getBlogLength(){var t=document.querySelector("[data-n4-rich-text]");return t&&0<(t=(t.textContent||"").split(/\s+/).filter(Boolean).length)?100*Math.round(t/100):0}function setCtaSectionAttributes(){var t=document.querySelector("[data-cta-list]");if(t){t=t.querySelectorAll("[data-cta-type='provider'], [data-cta-type='cta']");let n=["first","second","third","fourth","fifth"];t.forEach((t,e)=>{var o,a;e>=n.length||(o=t.getAttribute("data-cta-type"),e=n[e],"provider"===o?(a=t.querySelector("[data-component-name='product ad']"))&&a.setAttribute("data-section",e):"cta"===o&&(a=t.querySelector("a[data-component-name='product ad']"))&&a.setAttribute("data-section",e))})}}function getBlogProductAds(){return Array.from(document.querySelectorAll("[data-cta-type='provider'], [data-cta-type='cta']")).map(t=>toPlainLower(t.getAttribute("data-cta-name")?.trim())).filter(Boolean).join("|")}function getPageTitle(){var t=document.querySelector("h1");return toPlainLower(t?t.textContent:document.title)}function createPageViewData(t,e,o,a){return{event:"pageView",ecid:t||void 0,navigation:{domain:location.hostname,siteSection:getUrlSegment(1),siteSubsection1:getUrlSegment(2),siteSubsection2:getUrlSegment(3),siteSubsection3:getUrlSegment(4),siteSubsection4:getUrlSegment(5),pageURL:location.href,refURL:document.referrer||""},pageName:"cs-org:cedars-sinai:"+location.pathname.substring(1).replaceAll("/",":").split(".")[0],pageTitle:getPageTitle(),eventTimestamp:Date.now(),blog:{blogCategory:toPlainLower(decodeHtmlEntities(webflowCMSData.blogCategory)),blogPrimaryTopic:toPlainLower(decodeHtmlEntities(webflowCMSData.blogPrimaryTopic)),blogTags:e,blogPublishDate:toPlainLower(decodeHtmlEntities(webflowCMSData.blogPublishDate)),blogModifiedDate:toPlainLower(decodeHtmlEntities(webflowCMSData.blogModifiedDate)),blogAuthor:toPlainLower(decodeHtmlEntities(webflowCMSData.blogAuthor)),blogLength:o,blogProductAds:a}}}function trackPageView(e,o,a){getUserECIDAsync().then(t=>{t=createPageViewData(t,e,o,a);adobeDataLayer.push(t),enableLogging&&console.log(`DataLayer for ${window.location.href}:`,JSON.stringify(t,null,2))})}function getLinkType(t){var e=t.textContent.trim()||t.getAttribute("aria-label")||"",t=t.parentElement;return t&&t.textContent.trim().toLowerCase().startsWith("read:")?"primary cta":e.trim()?"secondary cta":"cta"}function trackRichtextLinks(){var t=document.querySelector("[data-n4-rich-text='true']");if(t){var e=document.querySelector("h1");let i=e?e.textContent.trim():document.title.split(" | ")[0]||document.title;t.addEventListener("click",t=>{var e,o,a,n,r,t=t.target.closest("a");t&&(e=(t.getAttribute("href")||"").trim())&&(o=toPlainLower((t.textContent.trim()||t.getAttribute("aria-label")||"").replace(/\n+/g," ").replace(/\s+/g," ").trim()),a=e.startsWith("tel:"),n=e.startsWith("mailto:"),r=/^https?:\/\//i.test(e)&&!e.includes(location.hostname),a=a||n||r,n=getLinkType(t),r={event:"click",componentName:"content block text",componentTitle:toPlainLower(i),linkHref:e,isExternalLink:a,linkAction:"link",linkText:o,linkType:n,eventTimestamp:Date.now()},adobeDataLayer.push(r),enableLogging)&&console.log(`DataLayer for ${window.location.href}:`,JSON.stringify(r,null,2))})}}function trackProductAdImpressions({selector:t='[data-cta-type="product ad"], [data-cta-type="provider"]',placementAttr:a="data-section",creativeAttr:n="data-impression-creative",contentAttr:r="data-impression-content"}={}){let i=new WeakSet,e=new IntersectionObserver(t=>{t.forEach(e=>{if(.75<=e.intersectionRatio&&!i.has(e.target)){i.add(e.target);e=e.target;let t="";t="provider"===e.getAttribute("data-cta-type")?(o=e.querySelector('[data-component-name="product ad"]'))?toPlainLower(o.getAttribute(a)||""):"":toPlainLower(e.getAttribute(a)||"");var o=toPlainLower(e.getAttribute(n)||""),e=toPlainLower(e.getAttribute(r)||"");window.adobeDataLayer?.push({event:"impression",eventTimestamp:Date.now(),impression:"product ad",impressionPlacement:t||"",impressionCreative:o||"",impressionContent:e||""})}})},{threshold:[0,.75,1]});document.querySelectorAll(t).forEach(t=>e.observe(t))}document.addEventListener("DOMContentLoaded",()=>{var t=getBlogTags(),e=getBlogLength(),o=getBlogProductAds();setTimeout(()=>{setCtaSectionAttributes(),trackProductAdImpressions()},1e3),trackPageView(t,e,o),trackRichtextLinks()});