function cleanupScrollTrigger(){providerScrollTriggers.forEach(e=>{e&&e.kill&&e.kill()}),providerScrollTriggers.length=0;var e=document.querySelector("[data-cta-list]");e&&(e.querySelectorAll("[data-cta-type='cta'], [data-cta-type='provider-list']").forEach(e=>{e.style.position="",e.style.left="",e.style.right="",e.style.top="",e.style.zIndex=""}),e.style.position="")}function handleRichTextColumns(){var l=document.querySelector("[data-n4-rich-text='true']");if(l){var n,o=l.innerHTML,i=/<p>\{\{column-start\}\}<\/p>([\s\S]*?)<p>\{\{column-end\}\}<\/p>/g,a=[];let e=i.lastIndex=0;for(;null!==(n=i.exec(o));)n.index>e&&a.push({type:"regular",content:o.slice(e,n.index)}),a.push({type:"column",content:n[1].trim()}),e=i.lastIndex;e<o.length&&a.push({type:"regular",content:o.slice(e)});let t="",r=[];a.forEach(e=>{"column"===e.type?r.push(`<div class="richtext-col">${e.content}</div>`):0<e.content.replace(/<p>(\s|&nbsp;|&zwj;|<br\s*\/?>)*<\/p>/gi,"").replace(/<br\s*\/?>/gi,"").replace(/&nbsp;/gi,"").replace(/&zwj;/gi,"").replace(/\s+/g,"").length&&(r.length&&(t+=`<div class="richtext-grid">${r.join("")}</div>`,r=[]),t+=e.content)}),r.length&&(t+=`<div class="richtext-grid">${r.join("")}</div>`),l.innerHTML=t}}function handleCtaBlocks(){ensureCtaMarker(),ensureProviderMarker(),(window.innerWidth<=991?showCtaBlocks:hideCtaBlocks)()}function showCtaBlocks(){let n=Array.from(document.querySelectorAll("[data-cta-type='cta']")),o=document.querySelector("[data-cta-type='provider-list']"),i=Array.from(document.querySelectorAll("p")).filter(e=>"{{cta-block}}"===e.textContent.trim()),a=0;document.querySelectorAll("p").forEach(e=>{var t,r,l=e.textContent.trim();"{{cta-block}}"===l&&0<=i.indexOf(e)&&a<n.length&&(t=n[a])&&!t.hasAttribute("data-mobile-cloned")&&((r=t.cloneNode(!0)).classList.add("is-mobile-cta"),r.removeAttribute("data-cta-type"),r.style.position="",r.style.left="",r.style.right="",r.style.top="",r.style.zIndex="",e.parentNode.insertBefore(r,e.nextSibling),t.setAttribute("data-mobile-cloned","true"),a++),"{{providers}}"===l&&o&&!o.hasAttribute("data-mobile-cloned")&&((r=o.cloneNode(!0)).classList.add("is-mobile-cta"),r.removeAttribute("data-cta-type"),r.style.position="",r.style.left="",r.style.right="",r.style.top="",r.style.zIndex="",e.parentNode.insertBefore(r,e.nextSibling),o.setAttribute("data-mobile-cloned","true"))})}function hideCtaBlocks(){document.querySelectorAll(".is-mobile-cta").forEach(e=>{e.remove()}),document.querySelectorAll("[data-mobile-cloned]").forEach(e=>{e.removeAttribute("data-mobile-cloned")}),document.querySelectorAll("p").forEach(e=>{var t=e.textContent.trim();"{{cta-block}}"!==t&&"{{providers}}"!==t||(e.style.visibility="hidden",e.style.marginBottom="-2rem")})}document.addEventListener("DOMContentLoaded",()=>{if(document.querySelector("[data-n4-rich-text='true']")){handleRichTextColumns(),ensureCtaMarker(),ensureProviderMarker(),handleCtaBlocks();let t=window.innerWidth<=991,r=!1;991<window.innerWidth&&(gsap.registerPlugin(ScrollTrigger),initializeCtaScrollTrigger(),r=!0);let l;window.addEventListener("resize",()=>{var e=window.innerWidth<=991;clearTimeout(l),e!==t&&(t=e,handleCtaBlocks()),e?r&&(cleanupScrollTrigger(),r=!1):l=setTimeout(()=>{r&&cleanupScrollTrigger(),hideCtaBlocks(),gsap.registerPlugin(ScrollTrigger),initializeCtaScrollTrigger(),r=!0},100),handleRichTextColumns(),ensureCtaMarker(),ensureProviderMarker()})}});let providerScrollTriggers=[];function ensureCtaMarker(){var e,t;document.querySelectorAll("[data-cta-type='cta']").length&&(e=document.querySelector("[data-n4-rich-text='true']"))&&!Array.from(e.querySelectorAll("p")).some(e=>"{{cta-block}}"===e.textContent.trim())&&((t=document.createElement("p")).textContent="{{cta-block}}",t.setAttribute("data-generated-cta-marker","true"),e.insertBefore(t,e.firstChild))}function ensureProviderMarker(){var e,t,r,l;document.querySelector("[data-cta-type='provider-list']")&&(r=document.querySelector("[data-n4-rich-text='true']"))&&!Array.from(r.querySelectorAll("p")).some(e=>"{{providers}}"===e.textContent.trim())&&(r=Array.from(r.querySelectorAll("p"))).length&&(e=r.find(e=>"{{cta-block}}"===e.textContent.trim()))&&(t=r[l=Math.min(4,r.length-1)],r=r.indexOf(e)>=l?e:t,(l=document.createElement("p")).textContent="{{providers}}",l.setAttribute("data-generated-provider-marker","true"),r.parentNode.insertBefore(l,r.nextSibling))}function initializeCtaScrollTrigger(){let o=document.querySelector("[data-cta-list]");if(o){ensureCtaMarker(),ensureProviderMarker();var e=Array.from(document.querySelectorAll("[data-cta-type='cta']")),i=document.querySelector("[data-cta-type='provider-list']");let r=[],l=(e.forEach(e=>{r.push({element:e,type:"cta",marker:null,height:280})}),i&&r.push({element:i,type:"provider-list",marker:null,height:null}),[]),t=(document.querySelectorAll("p").forEach(e=>{var t=e.textContent.trim();"{{cta-block}}"===t&&l.push(e),"{{providers}}"===t&&(t=r.find(e=>"provider-list"===e.type&&!e.marker))&&(t.marker=e)}),r.filter(e=>"cta"===e.type).forEach((e,t)=>{t<l.length&&(e.marker=l[t])}),r.filter(e=>e.marker)),n=(t.sort((e,t)=>e.marker.getBoundingClientRect().top+window.pageYOffset-(t.marker.getBoundingClientRect().top+window.pageYOffset)),t);if(0!==n.length){n.forEach(e=>{o.appendChild(e.element)}),n.forEach((e,t)=>{e.element.style.position="absolute",e.element.style.left="0",e.element.style.right="0",e.element.style.zIndex=n.length-t}),setTimeout(()=>{n.forEach(e=>{"provider-list"===e.type&&(e.height=e.element.offsetHeight)}),a()},50),window.currentUpdateFunction=a;let e=!1;function a(){let a=window.pageYOffset||document.documentElement.scrollTop;let c=o.getBoundingClientRect().top+a,r=new Map,s=(t.forEach(e=>{var t=e.marker;r.has(t)||r.set(t,[]),r.get(t).push(e)}),Array.from(r.entries()).sort((e,t)=>e[0].getBoundingClientRect().top+window.pageYOffset-(t[0].getBoundingClientRect().top+window.pageYOffset))),d=Number.NEGATIVE_INFINITY;s.forEach(([r,l],n)=>{var r=r.getBoundingClientRect().top+a,o=r-c,l=l[0];if(l){var i=l.height||l.element.offsetHeight;let e=o,t=!1;a+56>=r&&(o=s[n+1],t=o?(r=o[0].getBoundingClientRect().top+a)-(a+56)<=i+32?(n=r-c,e=n-i-32,!1):(o=a+56-c,e=o,!0):(r=a+56-c,e=r,!0));n=d+32,o=e<n,r=Math.max(e,n,0);d=t&&!o?(l.element.style.position="sticky",l.element.style.top="56px",a+56+i-c):(l.element.style.position="absolute",l.element.style.top=r+"px",r+i)}})}function c(){e||(requestAnimationFrame(()=>{a(),e=!1}),e=!0)}window.addEventListener("scroll",c),providerScrollTriggers.push({kill:()=>{window.removeEventListener("scroll",c),window.currentUpdateFunction=null,t.forEach(e=>{e.element.style.position="",e.element.style.left="",e.element.style.right="",e.element.style.top="",e.element.style.zIndex=""}),o.style.position=""}})}}}