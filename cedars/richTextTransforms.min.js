function cleanupScrollTrigger(){providerScrollTriggers.forEach(e=>{e&&e.kill&&e.kill()}),providerScrollTriggers.length=0;var e=document.querySelector("[data-cta-list]");e&&(e.querySelectorAll("[data-cta-type='cta'], [data-cta-type='provider-list']").forEach(e=>{e.style.position="",e.style.left="",e.style.right="",e.style.top="",e.style.zIndex=""}),e.style.position="")}function handleRichTextColumns(){var r=document.querySelector("[data-n4-rich-text='true']");if(r){var n,i=r.innerHTML,o=/<p>\{\{column-start\}\}<\/p>([\s\S]*?)<p>\{\{column-end\}\}<\/p>/g,a=[];let e=o.lastIndex=0;for(;null!==(n=o.exec(i));)n.index>e&&a.push({type:"regular",content:i.slice(e,n.index)}),a.push({type:"column",content:n[1].trim()}),e=o.lastIndex;e<i.length&&a.push({type:"regular",content:i.slice(e)});let t="",l=[];a.forEach(e=>{"column"===e.type?l.push(`<div class="richtext-col">${e.content}</div>`):0<e.content.replace(/<p>(\s|&nbsp;|&zwj;|<br\s*\/?>)*<\/p>/gi,"").replace(/<br\s*\/?>/gi,"").replace(/&nbsp;/gi,"").replace(/&zwj;/gi,"").replace(/\s+/g,"").length&&(l.length&&(t+=`<div class="richtext-grid">${l.join("")}</div>`,l=[]),t+=e.content)}),l.length&&(t+=`<div class="richtext-grid">${l.join("")}</div>`),r.innerHTML=t}}function handleCtaBlocks(){ensureProviderMarker(),(window.innerWidth<=991?showCtaBlocks:hideCtaBlocks)()}function showCtaBlocks(){let n=Array.from(document.querySelectorAll("[data-cta-type='cta']")),i=document.querySelector("[data-cta-type='provider-list']"),o=Array.from(document.querySelectorAll("p")).filter(e=>"{{cta-block}}"===e.textContent.trim());document.querySelectorAll("p").forEach(e=>{var t=e.textContent.trim();if("{{cta-block}}"===t)if(1===o.length&&2<=n.length){let l=document.createElement("div");l.style.display="flex",l.style.flexDirection="column",l.style.gap="2rem",l.classList.add("is-mobile-cta"),n.forEach(e=>{var t;e.hasAttribute("data-mobile-cloned")||((t=e.cloneNode(!0)).removeAttribute("data-cta-type"),t.style.position="",t.style.left="",t.style.right="",t.style.top="",t.style.zIndex="",l.appendChild(t),e.setAttribute("data-mobile-cloned","true"))}),0<l.children.length&&e.parentNode.insertBefore(l,e.nextSibling)}else{var l,r=n.find(e=>!e.hasAttribute("data-mobile-cloned"));r&&((l=r.cloneNode(!0)).classList.add("is-mobile-cta"),l.removeAttribute("data-cta-type"),l.style.position="",l.style.left="",l.style.right="",l.style.top="",l.style.zIndex="",e.parentNode.insertBefore(l,e.nextSibling),r.setAttribute("data-mobile-cloned","true"))}"{{providers}}"===t&&i&&!i.hasAttribute("data-mobile-cloned")&&((l=i.cloneNode(!0)).classList.add("is-mobile-cta"),l.removeAttribute("data-cta-type"),l.style.position="",l.style.left="",l.style.right="",l.style.top="",l.style.zIndex="",e.parentNode.insertBefore(l,e.nextSibling),i.setAttribute("data-mobile-cloned","true"))})}function hideCtaBlocks(){document.querySelectorAll(".is-mobile-cta").forEach(e=>{e.remove()}),document.querySelectorAll("[data-mobile-cloned]").forEach(e=>{e.removeAttribute("data-mobile-cloned")}),document.querySelectorAll("p").forEach(e=>{var t=e.textContent.trim();"{{cta-block}}"!==t&&"{{providers}}"!==t||(e.style.visibility="hidden",e.style.marginBottom="-2rem")})}document.addEventListener("DOMContentLoaded",()=>{if(document.querySelector("[data-n4-rich-text='true']")){handleRichTextColumns(),ensureProviderMarker(),handleCtaBlocks();let t=window.innerWidth<=991,l=!1;991<window.innerWidth&&(gsap.registerPlugin(ScrollTrigger),initializeCtaScrollTrigger(),l=!0);let r;window.addEventListener("resize",()=>{var e=window.innerWidth<=991;clearTimeout(r),e!==t&&(t=e,handleCtaBlocks()),e?l&&(cleanupScrollTrigger(),l=!1):r=setTimeout(()=>{l&&cleanupScrollTrigger(),hideCtaBlocks(),gsap.registerPlugin(ScrollTrigger),initializeCtaScrollTrigger(),l=!0},100),handleRichTextColumns(),ensureProviderMarker()})}});let providerScrollTriggers=[];function ensureProviderMarker(){var e,t,l,r;document.querySelector("[data-cta-type='provider-list']")&&(l=document.querySelector("[data-n4-rich-text='true']"))&&!Array.from(l.querySelectorAll("p")).some(e=>"{{providers}}"===e.textContent.trim())&&(l=Array.from(l.querySelectorAll("p"))).length&&(e=l.find(e=>"{{cta-block}}"===e.textContent.trim()))&&(t=l[r=Math.min(7,l.length-1)],l=l.indexOf(e)>=r?e:t,(r=document.createElement("p")).textContent="{{providers}}",r.setAttribute("data-generated-provider-marker","true"),l.parentNode.insertBefore(r,l.nextSibling))}function initializeCtaScrollTrigger(){let s=document.querySelector("[data-cta-list]");if(s){ensureProviderMarker();var c=Array.from(document.querySelectorAll("[data-cta-type='cta']")),d=document.querySelector("[data-cta-type='provider-list']");let l=[],r=(c.forEach(e=>{l.push({element:e,type:"cta",marker:null,height:280})}),d&&l.push({element:d,type:"provider-list",marker:null,height:null}),[]),t=(document.querySelectorAll("p").forEach(e=>{var t=e.textContent.trim();"{{cta-block}}"===t&&r.push(e),"{{providers}}"===t&&(t=l.find(e=>"provider-list"===e.type&&!e.marker))&&(t.marker=e)}),l.filter(e=>"cta"===e.type));l.filter(e=>"provider-list"===e.type);let n=null,e=!1,i=(1===r.length&&2<=t.length?(e=!0,(c=document.createElement("div")).style.display="flex",c.style.flexDirection="column",c.style.gap="2rem",n={element:c,type:"cta-wrapper",marker:r[0],height:null}):1===r.length?t.forEach(e=>{e.marker=r[0]}):1<r.length&&t.forEach((e,t)=>{t<r.length?e.marker=r[t]:e.marker=r[0]}),l.filter(e=>e.marker)),o=l.filter(e=>!e.marker),a=(e&&n&&(i=i.filter(e=>"cta"!==e.type),o=o.filter(e=>"cta"!==e.type),i.push(n)),i.sort((e,t)=>e.marker.getBoundingClientRect().top+window.pageYOffset-(t.marker.getBoundingClientRect().top+window.pageYOffset)),[...i,...o]);if(0!==a.length){a.forEach(e=>{"cta-wrapper"===e.type&&n?(t.forEach(e=>{n.element.appendChild(e.element),e.element.style.position="",e.element.style.left="",e.element.style.right="",e.element.style.top="",e.element.style.zIndex=""}),s.appendChild(n.element)):s.appendChild(e.element)}),a.forEach((e,t)=>{e.type,e.element.style.position="absolute",e.element.style.left="0",e.element.style.right="0",e.element.style.zIndex=a.length-t}),setTimeout(()=>{a.forEach(e=>{"provider-list"!==e.type&&"cta-wrapper"!==e.type||(e.height=e.element.offsetHeight)}),p()},50),window.currentUpdateFunction=p;let e=!1;function p(){let d=window.pageYOffset||document.documentElement.scrollTop;let p=s.getBoundingClientRect().top+d,l=new Map,m=(i.forEach(e=>{var t=e.marker;l.has(t)||l.set(t,[]),l.get(t).push(e)}),Array.from(l.entries()).sort((e,t)=>e[0].getBoundingClientRect().top+window.pageYOffset-(t[0].getBoundingClientRect().top+window.pageYOffset)));if(m.forEach(([e,o],a)=>{let s=e.getBoundingClientRect().top+d,c=s-p;e=o.find(e=>"cta-wrapper"===e.type);if(e){var t,l=e.height||e.element.offsetHeight;e.element.style.left="0",e.element.style.right="0",d+56>=s?(t=m[a+1])&&(t=t[0].getBoundingClientRect().top+d)-(d+56)<=l+32?(t=t-p,e.element.style.position="absolute",e.element.style.top=t-l-32+"px"):(e.element.style.position="sticky",e.element.style.top="56px"):(e.element.style.position="absolute",e.element.style.top=Math.max(0,c)+"px")}else{let i=c;o.forEach((e,t)=>{var l,r,n=e.height||e.element.offsetHeight,t=0===t;d+56>=s?(r=m[a+1])&&t&&(r=r[0].getBoundingClientRect().top+d)-(d+56)<=(l=o.reduce((e,t)=>e+(t.height||t.element.offsetHeight),0)+32*(o.length-1))+32?(r=r-p,e.element.style.position="absolute",e.element.style.top=r-l-32+(i-c)+"px"):(e.element.style.position=t?"sticky":"absolute",e.element.style.top=t?"56px":i+"px"):(e.element.style.position="absolute",e.element.style.top=i+"px"),i+=n+32})}}),0<o.length&&0<m.length){var e=m[0][0],t=m[0][1];let l=e.getBoundingClientRect().top+d-p;t.forEach(e=>{l+=(e.height||e.element.offsetHeight)+32}),o.forEach(e=>{var t=e.height||e.element.offsetHeight;e.element.style.position="absolute",e.element.style.top=l+"px",l+=t+32})}else if(0<o.length){let l=0;o.forEach(e=>{var t=e.height||e.element.offsetHeight;e.element.style.position="absolute",e.element.style.top=l+"px",l+=t+32})}}function m(){e||(requestAnimationFrame(()=>{p(),e=!1}),e=!0)}window.addEventListener("scroll",m),providerScrollTriggers.push({kill:()=>{window.removeEventListener("scroll",m),window.currentUpdateFunction=null,i.forEach(e=>{e.element.style.position="",e.element.style.left="",e.element.style.right="",e.element.style.top="",e.element.style.zIndex=""}),s.style.position=""}})}}}