let enableLogging=!0;function toPlainLower(e){return String(e||"").trim().toLowerCase().replace(/[^a-z0-9&.\-_, |]+/g,"")}function getUrlSegment(e){return(location.pathname.split("/").filter(Boolean)[e-1]||"").split(".")[0]}let ARTICLE_CATEGORIES=new Set(["healthy-living","expert-advice","research-innovations","community-impact","international"]);function isArticleDetail(e=location){var t,e=e.pathname.replace(/(^\/+|\/+$)/g,"").split("/").filter(Boolean);return"stories-and-insights"===e[0]&&(t=e[1]||"",!!ARTICLE_CATEGORIES.has(t))&&!!(t=e[2])&&!new Set(["page","tag","category","topics","author","archive"]).has(t)}let ecid=window.Visitor&&Visitor.getInstance?Visitor.getInstance("cedarssinai")?.getMarketingCloudVisitorID?.():void 0;if(!window.__ADOBE_NON_BLOG_PV__&&(window.__ADOBE_NON_BLOG_PV__=!0,!isArticleDetail())){window.adobeDataLayer=window.adobeDataLayer||[];let e=getUrlSegment(1),t=getUrlSegment(2),n=[e,t].filter(Boolean).join("/");adobeDataLayer.push({event:"pageView",ecid:ecid,navigation:{domain:location.hostname,siteSection:n,siteSubsection1:getUrlSegment(1)||"",siteSubsection2:getUrlSegment(2)||"",siteSubsection3:getUrlSegment(3)||"",siteSubsection4:getUrlSegment(4)||"",pageURL:location.href,refURL:document.referrer||""},pageName:"cs-org:cedars-sinai:"+location.pathname.substring(1).replaceAll("/",":").split(".")[0],pageTitle:document.title,eventTimestamp:Date.now()})}function handleAnalyticsClick(t){if(!t._adobeProcessed){t._adobeProcessed=!0;t=t.target.closest("a, button, [data-track-click]");if(t){var n=t.getAttribute("href")||"",a=t.innerText||t.getAttribute("aria-label")||"N/A",i=n.startsWith("tel:"),o=n.startsWith("mailto:"),r=n.startsWith("http")&&!n.includes(window.location.hostname),i=i||o||r,o=t.closest("[data-component-name]")?.getAttribute("data-component-name"),r=t.closest("[data-component-title]")?.getAttribute("data-component-title")||"N/A",l=t.getAttribute("data-link-action")||"link",c=t.getAttribute("data-link-type")||"cta",s=t.getAttribute("data-section")||"N/A";let e={};"article grid"===o?(e={event:"click",componentName:"article grid",componentTitle:r,linkHref:n,isExternalLink:i,linkAction:"link",linkText:a,section:s,linkType:c,eventTimestamp:Date.now()},enableLogging&&console.log("Tracking event 'article grid':",e)):"related articles"===o?(e={event:"click",componentName:"related articles",componentTitle:r,linkHref:n,isExternalLink:i,linkAction:"link",linkText:a,section:s,linkType:"cta",eventTimestamp:Date.now()},enableLogging&&console.log("Tracking event 'related articles':",e)):"product ad"===o?(e={event:"click",componentName:"product ad",componentTitle:r,linkHref:n,isExternalLink:i,linkAction:"link",linkText:a,section:s,linkType:"cta",eventTimestamp:Date.now()},enableLogging&&console.log("Tracking event 'product ad':",e)):"color card"===o?(e={event:"click",componentName:"color card",componentTitle:r,linkHref:n,isExternalLink:i,linkAction:"link",linkText:a,linkType:"cta",eventTimestamp:Date.now()},enableLogging&&console.log("Tracking event 'color card':",e)):"subscribe"===o?(e={event:"click",componentName:"subscribe",componentTitle:r,linkHref:n,isExternalLink:i,linkAction:"link",linkText:a,linkType:"cta",eventTimestamp:Date.now()},enableLogging&&console.log("Tracking event 'subscribe':",e)):"topics menu"===o?(e={event:"click",componentName:"topics menu",componentTitle:r,clickHref:n,isExternalLink:i,linkAction:l,linkText:a,linkType:"cta",eventTimestamp:Date.now()},enableLogging&&console.log("Tracking event 'topics menu':",e)):"pagination"===o?(e={event:"click",componentName:"pagination",componentTitle:r,linkHref:n,isExternalLink:i,linkAction:"link",linkText:t.getAttribute("data-link-text")||a,linkType:"cta",eventTimestamp:Date.now()},enableLogging&&console.log("Tracking event 'pagination':",e)):o&&(e={event:"click",componentName:o,componentTitle:r,linkHref:n,isExternalLink:i,linkAction:l,linkText:a,linkType:c,eventTimestamp:Date.now()},enableLogging)&&console.log("Tracking event 'generic':",e),e.event&&(adobeDataLayer.push(e),enableLogging)&&console.log(`DataLayer for ${window.location.href}:`,JSON.stringify(adobeDataLayer,null,2))}}}function trackProductAdImpressions({selector:e='[data-component-name="product ad"]',placementAttr:a="data-impression-placement",creativeAttr:i="data-impression-creative",contentAttr:o="data-impression-content"}={}){let r=new WeakSet,t=new IntersectionObserver(e=>{e.forEach(e=>{var t,n;.75<=e.intersectionRatio&&!r.has(e.target)&&(r.add(e.target),t=toPlainLower((e=e.target).getAttribute(a)||""),n=toPlainLower(e.getAttribute(i)||""),e=toPlainLower(e.getAttribute(o)||""),window.adobeDataLayer?.push({event:"impression",eventTimestamp:Date.now(),impression:"product ad",impressionPlacement:t||"",impressionCreative:n||"",impressionContent:e||void 0}))})},{threshold:[0,.75,1]});document.querySelectorAll(e).forEach(e=>t.observe(e))}function trackFormLoadsOnView(e="form[data-form-name]"){let n=new WeakSet,t=new IntersectionObserver(e=>{e.forEach(({target:e,isIntersecting:t})=>{t&&!n.has(e)&&(n.add(e),t=e.getAttribute("data-form-name")||e.name||e.id||"unnamed-form",e=e.getAttribute("data-app")||"stories-and-insights",window.adobeDataLayer?.push({event:"form",eventTimestamp:Date.now(),form:{action:"load",application:e,name:t}}))})},{threshold:.01});document.querySelectorAll(e).forEach(e=>t.observe(e))}function pushAdobeFormEvent({eventType:e,application:t,action:n="interaction",formName:a,fieldName:i,fieldValue:o,extra:r={}}){n={event:"form",eventTimestamp:Date.now(),form:{action:n,application:t,name:a},eventType:e,fieldName:i,fieldValue:o,...r};window.adobeDataLayer.push(n)}function maskValueIfPII(e,t,n,a){return a?(a=(e||"").toLowerCase(),e=(t||"").toLowerCase(),t=/email/.test(a)||"email"===e||/\S+@\S+\.\S+/.test(n),e=/phone|mobile|tel/.test(a)||"tel"===e,a=/name|firstname|lastname|first_name|last_name/.test(a),t?"[email]":e?"[phone]":a?"[name]":n):n}function readFieldValue(e){var t,n,a;if(e)return a=e.tagName.toLowerCase(),t=(e.type||"").toLowerCase(),"select"===a?e.multiple?Array.from(e.selectedOptions).map(e=>e.value):e.value:"checkbox"===t?(a=e.form?e.form.querySelectorAll(`input[type="checkbox"][name="${CSS.escape(e.name)}"]`):[e],n=Array.from(a).filter(e=>e.checked).map(e=>e.value||!0),e.name&&1<a.length?n:e.checked):"radio"===t?(a=e.form?.querySelector(`input[type="radio"][name="${CSS.escape(e.name)}"]:checked`))?a.value:null:"file"===t?e.files?.length?"[file-selected]":"[no-file]":e.value}function attachFormTracking(e=document,{application:t="stories-and-insights",formNameAttr:n="data-form-name",appAttr:o="data-app",selector:a="form"}={}){e.querySelectorAll(a).forEach(e=>{let a=e.getAttribute(n)||e.getAttribute("name")||e.id||"unnamed-form",i=e.getAttribute(o)||t;e.querySelectorAll("input, select, textarea").forEach(e=>{let n=e.name||e.id||e.getAttribute("data-field")||"unnamed-field";var t=(e.type||e.tagName).toLowerCase();if(e.addEventListener("focus",()=>{pushAdobeFormEvent({eventType:"focus",application:i,action:"interaction",formName:a,fieldName:n})}),e.addEventListener("blur",()=>{pushAdobeFormEvent({eventType:"blur",application:i,action:"interaction",formName:a,fieldName:n})}),"select"===e.tagName.toLowerCase()){let t=()=>{pushAdobeFormEvent({eventType:"open",application:i,action:"interaction",formName:a,fieldName:n})};e.addEventListener("mousedown",t,{passive:!0}),e.addEventListener("pointerdown",t,{passive:!0}),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key&&"ArrowDown"!==e.key&&"ArrowUp"!==e.key||t()})}/^(checkbox|radio)$/i.test(t)&&e.addEventListener("change",()=>{pushAdobeFormEvent({eventType:"toggle",application:i,action:"interaction",formName:a,fieldName:n})})})})}function pushFormOutcome({application:e,name:t,submitStatus:n,errors:a}){window.adobeDataLayer=window.adobeDataLayer||[];e={event:"form",eventTimestamp:Date.now(),form:{action:"submit",application:e,name:t,submitStatus:n}};a&&(e.form.errors=a),window.adobeDataLayer.push(e)}function collectClientErrorsFromValidator(e){return{label:e.errorList.map(e=>{e.element;return(e.message||"This field is required.").trim()}),location:"form"}}function attachFormOutcomeTracking(i,{application:o="stories-and-insights",formNameAttr:e="data-form-name"}={}){let r=i.getAttribute(e)||i.getAttribute("name")||i.id||"unnamed-form",l=!1;if(window.jQuery&&jQuery.fn.validate){e=jQuery(i),e=e.data("validator")||e.validate({});let a=e.settings.invalidHandler,t=(e.settings.invalidHandler=function(e,t){try{var n=collectClientErrorsFromValidator(t);pushFormOutcome({application:o,name:r,submitStatus:!1,errors:n})}finally{"function"==typeof a&&a.call(this,e,t)}},e.settings.submitHandler);e.settings.submitHandler=e=>{if(l=!0,window.adobeDataLayer.push({event:"form",eventTimestamp:Date.now(),form:{action:"submit-start",application:o,name:r}}),"function"==typeof t)return t(e);e.submit()}}else i.addEventListener("submit",()=>{l=!0},{capture:!0});function c(e){e=window.getComputedStyle(e);return"none"!==e.display&&"hidden"!==e.visibility}new MutationObserver(e=>{var t,n=i.parentElement?.querySelector(".w-form-done"),a=i.parentElement?.querySelector(".w-form-fail");l&&(n=n&&c(n),t=a&&c(a),n?(l=!1,pushFormOutcome({application:o,name:r,submitStatus:!0})):t&&(l=!1,n=(a.textContent||"").trim(),pushFormOutcome({application:o,name:r,submitStatus:!1,errors:{label:n?[n]:["Submission failed"],location:"form"}})))}).observe(document.body,{childList:!0,subtree:!0})}let __outcomeBound=new WeakSet;function initOutcomeTrackingOnAllForms({defaultApplication:n="stories-and-insights",formNameAttr:a="data-form-name",appAttr:i="data-app"}={}){let o=e=>{var t;e instanceof HTMLFormElement&&(__outcomeBound.has(e)||e.hasAttribute(a)&&(t=e.getAttribute(i)||n,attachFormOutcomeTracking(e,{application:t,formNameAttr:a}),__outcomeBound.add(e)))};document.querySelectorAll(`form[${a}]`).forEach(o),new MutationObserver(e=>{for(var t of e)for(var n of t.addedNodes)n instanceof Element&&(n.matches?.(`form[${a}]`)&&o(n),n.querySelectorAll?.(`form[${a}]`).forEach(o))}).observe(document.documentElement,{childList:!0,subtree:!0})}document.addEventListener("DOMContentLoaded",()=>{document.body.addEventListener("click",handleAnalyticsClick),trackFormLoadsOnView(),attachFormTracking(document,{application:"stories-and-insights",sendValues:!1}),trackProductAdImpressions(),initOutcomeTrackingOnAllForms({defaultApplication:"stories-and-insights",formNameAttr:"data-form-name",appAttr:"data-app"})});